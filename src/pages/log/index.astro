---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LogCard from '../../components/LogCard.astro';
import { getCollection } from 'astro:content';

const logPosts = await getCollection('ko/log', ({ data }) => {
  return data.published !== false && data.showInLog !== false;
});
const sortedPosts = logPosts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="기록" description="학습과 개발 과정을 기록합니다">
  <div class="log-list">
    <header class="page-header">
      <h1>기록</h1>
      <p>실험·기록·업데이트</p>
    </header>
    
    <div class="posts-grid">
      {sortedPosts.map((post) => (
        <LogCard
          title={post.data.title}
          excerpt={post.data.excerpt}
          date={post.data.date}
          slug={post.slug}
          tags={post.data.tags}
        />
      ))}
    </div>
  </div>
</BaseLayout>

<style>
  .log-list {
    max-width: 1200px;
    margin: 0 auto;
    padding: clamp(2rem, 1.5rem + 2.5vw, 4rem) clamp(1rem, 0.8rem + 1vw, 2rem);
  }

  .page-header {
    margin-bottom: clamp(2rem, 1.5rem + 2.5vw, 3rem);
  }

  .page-header h1 {
    font-size: clamp(1.75rem, 1.5rem + 1.25vw, 2.5rem);
    margin-bottom: 0.5rem;
  }

  .page-header p {
    color: #555;
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
    gap: clamp(1.5rem, 1.2rem + 1.5vw, 2.5rem);
  }
</style>
